<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MathLib: Fichero Fuente D:/Master Videojuegos ULL 09_10/Asignaturas/Pr치cticas B치sicas/Practicas Test/PracticaBasica - Tema2/PracticaBasica/MathLib/MathUtils/LinearSplitFunction.h</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generado por Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>P치gina&nbsp;principal</span></a></li>
      <li><a href="annotated.html"><span>Clases</span></a></li>
      <li class="current"><a href="files.html"><span>Archivos</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>Lista&nbsp;de&nbsp;archivos</span></a></li>
      <li><a href="globals.html"><span>Miembros&nbsp;de&nbsp;los&nbsp;ficheros</span></a></li>
    </ul>
  </div>
<h1>D:/Master Videojuegos ULL 09_10/Asignaturas/Pr徑ticas B硬icas/Practicas Test/PracticaBasica - Tema2/PracticaBasica/MathLib/MathUtils/LinearSplitFunction.h</h1><a href="_linear_split_function_8h.html">Ir a la documentaci칩n de este archivo.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef LINEAR_SPLIT_FUNCTION_H_</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define LINEAR_SPLIT_FUNCTION_H_</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &quot;../Vec/VecLib.h&quot;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &quot;cLinearInterpolator.h&quot;</span>
<a name="l00006"></a>00006 
<a name="l00008"></a>00008 
<a name="l00020"></a>00020 <span class="keyword">template</span>&lt; <span class="keywordtype">unsigned</span>      NPo<span class="keywordtype">int</span>s &gt;
<a name="l00021"></a><a class="code" href="classc_linear_split_function.html">00021</a> <span class="keyword">class </span><a class="code" href="classc_linear_split_function.html" title="Representa una funcion a trozos.">cLinearSplitFunction</a>
<a name="l00022"></a>00022 {
<a name="l00023"></a>00023   <span class="keyword">public</span>:
<a name="l00025"></a>00025 
<a name="l00028"></a>00028       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classc_linear_split_function.html#a343d682ba5deb3d540e53e5b4b5d89cc" title="Inicializa la clase.">Init</a>( <span class="keywordtype">void</span> );
<a name="l00030"></a>00030 
<a name="l00035"></a>00035       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classc_linear_split_function.html#ad1d97bafbc5db2a88d2d7a2795dabb9c" title="A人de un punto a la clase.">Add</a>( <span class="keywordtype">float</span>  lfX, <span class="keywordtype">float</span>  lfY );
<a name="l00037"></a>00037 
<a name="l00041"></a>00041       <span class="keywordtype">void</span> <a class="code" href="classc_linear_split_function.html#ad1d97bafbc5db2a88d2d7a2795dabb9c" title="A人de un punto a la clase.">Add</a>( <a class="code" href="structc_vec2.html" title="Esta estructura representa un vector de tama絪 2.">cVec2</a> lfPoint );
<a name="l00043"></a>00043 
<a name="l00048"></a>00048       <span class="keywordtype">void</span> <a class="code" href="classc_linear_split_function.html#ad1d97bafbc5db2a88d2d7a2795dabb9c" title="A人de un punto a la clase.">Add</a>( <a class="code" href="structc_vec2.html" title="Esta estructura representa un vector de tama絪 2.">cVec2</a> *lafPoints, <span class="keywordtype">unsigned</span>      luiNumPoints );
<a name="l00050"></a>00050 
<a name="l00055"></a>00055       <span class="keywordtype">float</span>  <a class="code" href="classc_linear_split_function.html#a7ff160394977a786de0d4f7bda9b0e8f" title="Evalua el punto en la funcion a trozos.">Eval</a>( <span class="keywordtype">float</span>  lfX );
<a name="l00057"></a>00057 
<a name="l00062"></a>00062       <span class="keywordtype">float</span>  <a class="code" href="classc_linear_split_function.html#a7d00fd7b0d8ce306e4ae037b404818ba" title="Evalua el punto en la funcion a trozos utilizando una evaluacion anterior.">CoherentEval</a>( <span class="keywordtype">float</span>  lfX );
<a name="l00063"></a>00063 
<a name="l00064"></a>00064   <span class="keyword">private</span>:
<a name="l00065"></a>00065       <span class="keywordtype">unsigned</span>         muiAdded;
<a name="l00066"></a>00066       <a class="code" href="structc_vec2.html" title="Esta estructura representa un vector de tama絪 2.">cVec2</a>        mvPoints[ NPoints ];
<a name="l00067"></a>00067       <a class="code" href="classc_linear_interpolator.html" title="Calcula una interpolacion lineal.">cLinearInterpolator</a> maInterpolators[ NPoints - 1 ];
<a name="l00068"></a>00068       <span class="keywordtype">unsigned</span>         muiLast;
<a name="l00069"></a>00069 };
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 <span class="keyword">template</span>&lt; <span class="keywordtype">unsigned</span>      NPo<span class="keywordtype">int</span>s &gt;  <span class="keyword">inline</span> <span class="keywordtype">void</span> 
<a name="l00072"></a><a class="code" href="classc_linear_split_function.html#a343d682ba5deb3d540e53e5b4b5d89cc">00072</a> <a class="code" href="classc_linear_split_function.html#a343d682ba5deb3d540e53e5b4b5d89cc" title="Inicializa la clase.">cLinearSplitFunction&lt; NPoints &gt;::Init</a>( <span class="keywordtype">void</span> )
<a name="l00073"></a>00073 {
<a name="l00074"></a>00074   muiAdded = 0;
<a name="l00075"></a>00075   muiLast = NPoints &gt;&gt; 1;
<a name="l00076"></a>00076 }
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <span class="keyword">template</span>&lt; <span class="keywordtype">unsigned</span>      NPo<span class="keywordtype">int</span>s &gt; <span class="keywordtype">void</span> 
<a name="l00079"></a><a class="code" href="classc_linear_split_function.html#ad1d97bafbc5db2a88d2d7a2795dabb9c">00079</a> <a class="code" href="classc_linear_split_function.html#ad1d97bafbc5db2a88d2d7a2795dabb9c" title="A人de un punto a la clase.">cLinearSplitFunction&lt; NPoints &gt;::Add</a>( <span class="keywordtype">float</span>  lfX, <span class="keywordtype">float</span>  lfY )
<a name="l00080"></a>00080 {
<a name="l00081"></a>00081   <a class="code" href="classc_linear_split_function.html#ad1d97bafbc5db2a88d2d7a2795dabb9c" title="A人de un punto a la clase.">Add</a>( <a class="code" href="structc_vec2.html" title="Esta estructura representa un vector de tama絪 2.">cVec2</a>( lfX, lfY ) );
<a name="l00082"></a>00082 }
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="keyword">template</span>&lt; <span class="keywordtype">unsigned</span>      NPo<span class="keywordtype">int</span>s &gt; <span class="keywordtype">void</span> 
<a name="l00085"></a><a class="code" href="classc_linear_split_function.html#a961b19b470f70c1ed2d1e9361c974993">00085</a> <a class="code" href="classc_linear_split_function.html#ad1d97bafbc5db2a88d2d7a2795dabb9c" title="A人de un punto a la clase.">cLinearSplitFunction&lt; NPoints &gt;::Add</a>( <a class="code" href="structc_vec2.html" title="Esta estructura representa un vector de tama絪 2.">cVec2</a> lfPoint )
<a name="l00086"></a>00086 {
<a name="l00087"></a>00087   assert( muiAdded == 0 || mvPoints[ muiAdded - 1 ].x &lt; lfPoint.<a class="code" href="structc_vec2.html#ab0579c05d3fd7f0cd5c149c8196d58b3">x</a> );
<a name="l00088"></a>00088   assert( muiAdded &lt; NPoints );
<a name="l00089"></a>00089 
<a name="l00090"></a>00090   mvPoints[ muiAdded ] = lfPoint;
<a name="l00091"></a>00091   <span class="keywordflow">if</span> ( muiAdded &gt; 0 )
<a name="l00092"></a>00092   {
<a name="l00093"></a>00093       maInterpolators[ muiAdded - 1].<a class="code" href="classc_linear_interpolator.html#a7c02893997109a64f054de4805f23f77" title="Inicializa el interpolador pasandole los dos puntos (X0,Y0) y (X1,Y1).">Init</a>( mvPoints[ muiAdded - 1 ], mvPoints[ muiAdded ] );  
<a name="l00094"></a>00094   }
<a name="l00095"></a>00095 
<a name="l00096"></a>00096   ++muiAdded;
<a name="l00097"></a>00097 }
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 <span class="keyword">template</span>&lt; <span class="keywordtype">unsigned</span>      NPo<span class="keywordtype">int</span>s &gt; <span class="keywordtype">void</span> 
<a name="l00100"></a><a class="code" href="classc_linear_split_function.html#aef51aa1ae6e4a3b107b6dff9efdfb389">00100</a> <a class="code" href="classc_linear_split_function.html#ad1d97bafbc5db2a88d2d7a2795dabb9c" title="A人de un punto a la clase.">cLinearSplitFunction&lt; NPoints &gt;::Add</a>( <a class="code" href="structc_vec2.html" title="Esta estructura representa un vector de tama絪 2.">cVec2</a> *lafPoints, <span class="keywordtype">unsigned</span>      luiNumPoints  )
<a name="l00101"></a>00101 {
<a name="l00102"></a>00102   assert( luiNumPoints == NPoints );
<a name="l00103"></a>00103   <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span>      luiIndex = 0; luiIndex &lt; NPoints; ++luiIndex )
<a name="l00104"></a>00104   {
<a name="l00105"></a>00105       <a class="code" href="classc_linear_split_function.html#ad1d97bafbc5db2a88d2d7a2795dabb9c" title="A人de un punto a la clase.">Add</a>( lafPoints[ luiIndex ] );
<a name="l00106"></a>00106   }
<a name="l00107"></a>00107 }
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 <span class="keyword">template</span>&lt; <span class="keywordtype">unsigned</span>      NPo<span class="keywordtype">int</span>s &gt; <span class="keywordtype">float</span>  
<a name="l00110"></a><a class="code" href="classc_linear_split_function.html#a7ff160394977a786de0d4f7bda9b0e8f">00110</a> <a class="code" href="classc_linear_split_function.html#a7ff160394977a786de0d4f7bda9b0e8f" title="Evalua el punto en la funcion a trozos.">cLinearSplitFunction&lt; NPoints &gt;::Eval</a>( <span class="keywordtype">float</span>  lfX )
<a name="l00111"></a>00111 {  
<a name="l00112"></a>00112   assert( muiAdded == NPoints );
<a name="l00113"></a>00113 
<a name="l00114"></a>00114   <span class="keywordtype">unsigned</span>      luiInit = 0;
<a name="l00115"></a>00115   <span class="keywordtype">unsigned</span>      luiEnd = NPoints - 1;
<a name="l00116"></a>00116   <span class="keywordtype">unsigned</span>      luiMiddle = 0;
<a name="l00117"></a>00117 
<a name="l00118"></a>00118   <span class="keywordflow">while</span> ( <span class="keyword">true</span> )
<a name="l00119"></a>00119   {
<a name="l00120"></a>00120       assert( luiEnd &gt;= luiInit );
<a name="l00121"></a>00121       luiMiddle = (luiEnd + luiInit) &gt;&gt; 1;
<a name="l00122"></a>00122 
<a name="l00123"></a>00123       <span class="keywordflow">if</span> ( luiEnd == luiInit )
<a name="l00124"></a>00124       {
<a name="l00125"></a>00125           <span class="comment">// Finish the search</span>
<a name="l00126"></a>00126           luiMiddle = luiInit;
<a name="l00127"></a>00127           <span class="keywordflow">break</span>;
<a name="l00128"></a>00128       }
<a name="l00129"></a>00129       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( luiEnd - luiInit == 1 )
<a name="l00130"></a>00130       {
<a name="l00131"></a>00131           <span class="comment">// Finish the search</span>
<a name="l00132"></a>00132           luiMiddle = luiInit;
<a name="l00133"></a>00133           <span class="keywordflow">break</span>;
<a name="l00134"></a>00134       }
<a name="l00135"></a>00135       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( mvPoints[ luiMiddle ].x &gt; lfX )
<a name="l00136"></a>00136       {
<a name="l00137"></a>00137           luiEnd = luiMiddle;
<a name="l00138"></a>00138       }
<a name="l00139"></a>00139       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( mvPoints[ luiMiddle ].x &lt; lfX )
<a name="l00140"></a>00140       {
<a name="l00141"></a>00141           luiInit = luiMiddle;
<a name="l00142"></a>00142       }
<a name="l00143"></a>00143       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( mvPoints[ luiMiddle ].x == lfX )
<a name="l00144"></a>00144       {
<a name="l00145"></a>00145           <span class="keywordflow">break</span>;
<a name="l00146"></a>00146       }
<a name="l00147"></a>00147   }
<a name="l00148"></a>00148 
<a name="l00149"></a>00149   <span class="keywordflow">if</span> ( luiMiddle == NPoints - 1 )
<a name="l00150"></a>00150   {
<a name="l00151"></a>00151       --luiMiddle;
<a name="l00152"></a>00152   }
<a name="l00153"></a>00153 
<a name="l00154"></a>00154   muiLast = luiMiddle;
<a name="l00155"></a>00155 
<a name="l00156"></a>00156   <span class="comment">// Eval the interpolator</span>
<a name="l00157"></a>00157   <span class="keywordflow">return</span> maInterpolators[ luiMiddle ].<a class="code" href="classc_linear_interpolator.html#a23fed19b6a9261ea8751d875acd69e5a" title="Evalua el interpolador o la recta en el punto indicado.">Eval</a>( lfX );
<a name="l00158"></a>00158 }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 <span class="keyword">template</span>&lt; <span class="keywordtype">unsigned</span>      NPo<span class="keywordtype">int</span>s &gt; <span class="keywordtype">float</span>  
<a name="l00161"></a><a class="code" href="classc_linear_split_function.html#a7d00fd7b0d8ce306e4ae037b404818ba">00161</a> <a class="code" href="classc_linear_split_function.html#a7d00fd7b0d8ce306e4ae037b404818ba" title="Evalua el punto en la funcion a trozos utilizando una evaluacion anterior.">cLinearSplitFunction&lt; NPoints &gt;::CoherentEval</a>( <span class="keywordtype">float</span>  lfX )
<a name="l00162"></a>00162 {
<a name="l00163"></a>00163   <span class="keywordtype">unsigned</span>      luiMiddle = muiLast;
<a name="l00164"></a>00164 
<a name="l00165"></a>00165   <span class="keywordflow">while</span> ( <span class="keyword">true</span> )
<a name="l00166"></a>00166   {
<a name="l00167"></a>00167       <span class="keywordflow">if</span> ( (luiMiddle == 0 &amp;&amp; mvPoints[ luiMiddle ].x &gt; lfX ) ||
<a name="l00168"></a>00168            (luiMiddle == NPoints - 1 &amp;&amp; mvPoints[ luiMiddle ].x &lt; lfX ) ||
<a name="l00169"></a>00169            (mvPoints[ luiMiddle ].x == lfX ) ||
<a name="l00170"></a>00170            (luiMiddle &lt; NPoints - 1 &amp;&amp; mvPoints[ luiMiddle ].x &lt;= lfX &amp;&amp; mvPoints[ luiMiddle + 1 ].x &gt;= lfX ) )
<a name="l00171"></a>00171       {
<a name="l00172"></a>00172           <span class="keywordflow">break</span>;
<a name="l00173"></a>00173       }
<a name="l00174"></a>00174       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( mvPoints[ luiMiddle ].x &lt; lfX )
<a name="l00175"></a>00175       {
<a name="l00176"></a>00176           ++luiMiddle;
<a name="l00177"></a>00177       }
<a name="l00178"></a>00178       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( mvPoints[ luiMiddle ].x &gt; lfX )
<a name="l00179"></a>00179       {
<a name="l00180"></a>00180           --luiMiddle;
<a name="l00181"></a>00181       }
<a name="l00182"></a>00182   }
<a name="l00183"></a>00183 
<a name="l00184"></a>00184   <span class="keywordflow">if</span> ( luiMiddle == NPoints - 1 )
<a name="l00185"></a>00185   {
<a name="l00186"></a>00186       --luiMiddle;
<a name="l00187"></a>00187   }
<a name="l00188"></a>00188 
<a name="l00189"></a>00189   muiLast = luiMiddle;
<a name="l00190"></a>00190 
<a name="l00191"></a>00191   <span class="comment">// Eval the interpolator</span>
<a name="l00192"></a>00192   <span class="keywordflow">return</span> maInterpolators[ luiMiddle ].<a class="code" href="classc_linear_interpolator.html#a23fed19b6a9261ea8751d875acd69e5a" title="Evalua el interpolador o la recta en el punto indicado.">Eval</a>( lfX );
<a name="l00193"></a>00193 }
<a name="l00194"></a>00194 
<a name="l00195"></a>00195 <span class="preprocessor">#endif // LINEAR_SPLIT_FUNCTION_H_</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generado el Wed Oct 6 00:48:12 2010 para MathLib por&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
